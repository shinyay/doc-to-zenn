---
title: "100日後にRustをちょっと知ってる人になる: [Day 41]幽霊型 Phantom Type"
emoji: "🦀"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [rust]
published: false
---
## Day 41 のテーマ

[Day 40](https://zenn.dev/shinyay/articles/hello-rust-day040) では、ジェネリクスで書くとやや複雑になりそうな場合に **関連型** という宣言の仕方を使って書き換えることを見てみました。

**型パラメータ**を利用して構造体や関数などの型を汎化させる仕組みのジェネリクスですが、この型パラメータを用いたデザインパターンがあります。
それが、**Phantom Type** といういもので、日本語だと**幽霊型**と呼ぶそうです。
個人的に今まで使ってきた言語では幽霊型と呼ぶようなものがなかった（僕が知らなかっただけ？）なので見ていこうと思います。

## 幽霊型

まず**幽霊型**がどういうものなのか、というのを様々な言語で定義でけられているものを見てみました。
Haskel, Swift, TypeScript, Sacala, Elm など大体次のような内容で説明されていました。

> 型パラメータを使用してコンパイル時には影響を与えるが、実行時の挙動には影響を与えない型を用いたデザインパターンの一種

- Haskel のケース

```haskel
data Phantom x a = Phantom
```

- Scala のケース

```scala
case class Phantom[X, A](a: A)
```

いずれのケースも、**型パラメータ** `X` が定義はされているものの使われていないのです。ここで何をしようとしているとかというと、実際の値の型になる `A` は同だっとしても、`X, A` という組み合わせでコンパイルチェックを行い、誤った値を渡した場合にコンパイルエラーにするというもの、らしいです。

まだ正直よく分かりません…

Rust で実例を見ながら考えたいと思います。



## Day 41 のまとめ
