---
title: "100æ—¥å¾Œã«Rustã‚’ã¡ã‚‡ã£ã¨çŸ¥ã£ã¦ã‚‹äººã«ãªã‚‹: [Day 68]"
emoji: "ğŸ¦€"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [rust]
published: false
---
## Day 68 ã®ãƒ†ãƒ¼ãƒ
[Day 66](https://zenn.dev/shinyay/articles/hello-rust-day066) ã§ **[Blessed.rs](https://blessed.rs/crates)** ã®ç´¹ä»‹ã‚’ã—ã¾ã—ãŸã€‚ãŠã™ã™ã‚ã®ã‚¯ãƒ¬ãƒ¼ãƒˆã‚’ç´¹ä»‹ã—ã¦ãã‚Œã¦ã„ã‚‹ã‚µã‚¤ãƒˆã§ã—ãŸã€‚ã¨ã¯ã„ãˆã€ãã“ã§ç´¹ä»‹ã—ã¦ã„ã‚‹ã‚¯ãƒ¬ãƒ¼ãƒˆã¯å…¨ãè¦‹ã¦ã„ãªã‹ã£ãŸã®ã§ã€ä»Šå¾Œè¦‹ãªãŒã‚‰ä½¿ã„æ–¹ã‚’å­¦ã‚“ã§ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/56c77826cbc7-20221122.png)

ã¨ã„ã†ã‚ã‘ã§ã€Blessed.rs ã‚’é–‹ã„ã¦ä¸Šã‹ã‚‰è¦‹ã¦ã„ã“ã†ã¨ãŠã‚‚ã£ãŸã®ã§ã™ã‘ã©ã€ä¸€ç•ªä¸Šã¯ `rustup` ã§æ™®é€šã«ä½¿ã£ã¦ã„ã‚‹ CLI ã ã£ãŸã®ã§ãã®æ¬¡ã® **clippy** ã«ã¤ã„ã¦è¦‹ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚Lint ãƒ„ãƒ¼ãƒ«ãªã®ã§ã€Rust åˆå­¦è€…ã§ãªã„äººé”ã«ã¨ã£ã¦ã¯æ™®é€šã«ä½¿ã£ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ãªã®ã ã‚ã†ã¨æ€ã„ã¤ã¤ã‚‚ã€ã¼ãã¯ã¾ã ä½¿ã£ãŸã“ã¨ãŒãªã„ã®ã§æ”¹ã‚ã¦ä»Šå›è¦‹ã¦ã¿ãŸã„ãªã¨æ€ã„ã¾ã™ã€‚

## clippy

- [clippy](https://github.com/rust-lang/rust-clippy)

**clippy** ã¯ Blessed.rs ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ã—ã¦ã‚‚èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€**Linting** ã¤ã¾ã‚Š Lint ãƒ„ãƒ¼ãƒ«ã‚„ã€Linter ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚³ãƒ¼ãƒ‰ã®é™çš„ãƒã‚§ãƒƒã‚¯ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚Lint ãƒ„ãƒ¼ãƒ«ã«é¦´æŸ“ã¿ã®ãªã„äººå‘ã‘ã«ç°¡å˜ã«èª¬æ˜ã‚’ã™ã‚‹ã¨ã€äºˆã‚ç‰¹å®šã®è¨€èªã®æ›¸ãæ–¹ã«å¯¾ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã‚’å®šã‚ã¦ãŠãã€ãã®ãƒ«ãƒ¼ãƒ«ã«å¯¾ã—ã¦è¨˜è¿°ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç…§ã‚‰ã—åˆã‚ã›ã¦é©åˆ‡ãªã®ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ãªå†…å®¹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚

- å‹ãŒä¸€è‡´ã—ãªã„é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã‹ã©ã†ã‹
- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å†…ã«æœªä½¿ç”¨ã®å¤‰æ•°ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹
- åˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„å¤‰æ•°ãŒã‚ã‚‹ã‹ã©ã†ã‹

ãªã©ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦ã‚ã‚‹ã¹ãçŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã¾ã™ã€‚å‚è€ƒã¾ã§ã«ã€Linter ã¯ Rust ã«é™ã‚‰ãšæ§˜ã€…ãªè¨€èªã§æä¾›ã•ã‚Œã¦ã„ã‚‹ã®ã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®åŠ¹ç‡ã‚’ã‚ã’ã‚‹ã¨ã„ã†æ„å‘³ã§ã‚‚å°å…¥ã—ã¦ã‚‚ã‚ˆã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚ã¾ãŸã€PR ã‚’å‡ºã™å‰ã«ç¤¼å„€ã¨ã—ã¦ linter ã§ãƒã‚§ãƒƒã‚¯ã¯ã—ã¦ãŠã„ãŸæ–¹ãŒã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

`rustup` ã«ã‚ˆã‚Š **clippy** ã¨ãã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã™ã§ã«RustupãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€æœ€æ–°ã® rustup ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ãã ã•ã„ã€‚

```shell
rustup update
```

rustupã¨æœ€æ–°ã®å®‰å®šç‰ˆãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‚‰ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```shell
rustup component add clippy
```

`cargo` ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚

```shell
$ cargo --list

Installed Commands:
  :
clippy               Checks a package to catch common mistakes and improve your Rust code.
  :
```

ã“ã‚Œã§ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å¯¾è±¡ã®ãƒ•ã‚©ãƒ«ãƒ€ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ clippy ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

```shell
cargo clippy
```

### clippy å®Ÿè¡Œä¾‹

æ¬¡ã®ã‚ˆã†ãªå††ã®é¢ç©ã‚’æ±‚ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚

```rust
fn main() {
    let x = 3.1415;
    let r = 8.0;
    println!("åŠå¾„:{} ã®å††ã®é¢ç©ã¯ {}",r , x * r * r);
}
```

```shell
$ cargo run

åŠå¾„:8 ã®å††ã®é¢ç©ã¯ 201.056
```

å®Ÿè¡Œã™ã‚‹ã¨ç‰¹ã«å•é¡Œãªãæ­£å¸¸ã«å‹•ä½œã—ã¾ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’ `clippy` ã§ãƒã‚§ãƒƒã‚¯ã‚’ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã‚’å‡ºã—ã¦ãã‚Œã¾ã™ã€‚

```shell
cargo clippy
```

```shell
error: approximate value of `f{32, 64}::consts::PI` found
 --> src/main.rs:2:13
  |
2 |     let x = 3.1415;
  |             ^^^^^^
  |
  = note: `#[deny(clippy::approx_constant)]` on by default
  = help: consider using the constant directly
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#approx_constant

error: could not compile `day_68_clippy` due to previous error
```

å††å‘¨ç‡ã®å€¤ã¨ã—ã¦ã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã§å®šã‚ã¦ã„ãŸ `3.1415` ã¨ã„ã†å€¤ã‚’åˆ¤åˆ¥ã—ã¦ã€æ­£ç¢ºãªå††å‘¨ç‡ã®å®šæ•°ã®å­˜åœ¨ã‚’ç¤ºã—ã¦ãã‚Œã¾ã—ãŸã€‚

## Day 68 ã®ã¾ã¨ã‚
